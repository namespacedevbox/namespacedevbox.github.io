<!DOCTYPE html>
<html>

<head>
    <title>Simple Sketch</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.blue-red.min.css" />
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <link rel="Icon" sizes="192x192" href="ic_launcher.png">
    <link rel="apple-touch-icon" href="ic_launcher_ios.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Simple Sketch">
</head>

<body>
    <style>
        #content1 {
            margin: 0px;
            width: 100%;
            height: 100%;
        }

        td {
            text-align: center;
            width: 50%;
            padding: 10px;
        }

        table {
            width: 100%;
            overflow: hidden;
        }
    </style>
    <!-- Always shows a header, even in smaller screens. -->
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
        <header class="mdl-layout__header">
            <div class="mdl-layout__header-row">
                <!-- Title -->
                <span class="mdl-layout-title">Simple Sketch</span>
                <!-- Add spacer, to align navigation to the right -->
                <div class="mdl-layout-spacer"></div>
                <!-- Navigation. We hide it in small screens. -->
                <nav class="mdl-navigation">
                    <button id="currentColor" class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="setColor(this)"
                        style="background-color: #F44336; position: relative; transform: translateY(+50%)">
                        <i class="material-icons">gesture</i>
                    </button>
                </nav>
            </div>
        </header>
        <div class="mdl-layout__drawer">
            <span class="mdl-layout-title">Colors</span>
            <!--  <nav class="mdl-navigation"> -->
            <div>
                <table>
                    <tr>
                        <td>
                            <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="setColor(this)"
                                style="background-color: #F44336">
                                <i class="material-icons palette"></i>
                            </button>
                        </td>
                        <td>
                            <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="setColor(this)"
                                style="background-color: #E91E63">
                                <i class="material-icons palette"></i>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="setColor(this)"
                                style="background-color: #9C27B0"></button>
                        </td>
                        <td>
                            <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="setColor(this)"
                                style="background-color: #673AB7"></button>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="setColor(this)"
                                style="background-color: #3F51B5"></button>
                        </td>
                        <td>
                            <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="setColor(this)"
                                style="background-color: #2196F3"></button>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="setColor(this)"
                                style="background-color: #00BCD4"></button>
                        </td>
                        <td>
                            <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="setColor(this)"
                                style="background-color: #E91E63"></button>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="setColor(this)"
                                style="background-color: #009688"></button>
                        </td>
                        <td>
                            <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="setColor(this)"
                                style="background-color: #4CAF50"></button>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="setColor(this)"
                                style="background-color: #8BC34A"></button>
                        </td>
                        <td>
                            <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="setColor(this)"
                                style="background-color: #CDDC39"></button>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="setColor(this)"
                                style="background-color: #FFEB3B"></button>
                        </td>
                        <td>
                            <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="setColor(this)"
                                style="background-color: #FFC107"></button>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="setColor(this)"
                                style="background-color: #FF9800"></button>
                        </td>
                        <td>
                            <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="setColor(this)"
                                style="background-color: #FF5722"></button>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="setColor(this)"
                                style="background-color: #795548"></button>
                        </td>
                        <td>
                            <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="setColor(this)"
                                style="background-color: #9E9E9E"></button>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="setColor(this)"
                                style="background-color: #000000"></button>
                        </td>
                        <td>
                            <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="setColor(this)"
                                style="background-color: #FFFFFF"></button>
                        </td>
                    </tr>
                </table>
            </div>
            <div style="padding: 10px, 0px; text-align: center">
                <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect" onclick="closeDrawer()">
                    <i class="material-icons">clear</i>
                </button>
            </div>

            <!--  </nav> -->
        </div>
        <main class="mdl-layout__content">
            <div class="page-content">
                <!-- Your content goes here -->
                <div id="content"></div>
            </div>
        </main>
    </div>
    <script>        
        var ctx, color = "#F44336"; //start color
        document.addEventListener("DOMContentLoaded", function () {
            // setup a new canvas for drawing wait for device init
            setTimeout(function () {
                newCanvas();
            }, 10);
        }, false);
        // function to setup a new canvas for drawing
        function newCanvas() {
            //define and resize canvas
            document.getElementById("content").style.height = window.innerHeight;// - 90;
            var canvas = '<canvas id="canvas" width="' + window.innerWidth + '" height="' + (window.innerHeight/* - 90*/) + '"></canvas>';
            document.getElementById("content").innerHTML = canvas;

            // setup canvas
            ctx = document.getElementById("canvas").getContext("2d");
            ctx.strokeStyle = color;
            ctx.lineWidth = 10;
            ctx.lineCap = "round";
            ctx.lineJoin = "round";

            // setup to trigger drawing on mouse or touch
            drawTouch();
            drawPointer();
            drawMouse();
        }

        function setColor(btn) {
            /* for (var i = 0; i < document.getElementsByClassName("palette").length; i++) {
                document.getElementsByClassName("palette")[i].innerHTML="done";             
            } */

            color = window.getComputedStyle(btn).backgroundColor;
            ctx.beginPath();
            ctx.strokeStyle = color;
            //set current color
            document.getElementById("currentColor").style.backgroundColor = window.getComputedStyle(btn).backgroundColor;
            //Close drawer
            var layout = document.querySelector('.mdl-layout');
            layout.MaterialLayout.toggleDrawer();
        }

        function closeDrawer() {
            var layout = document.querySelector('.mdl-layout');
            layout.MaterialLayout.toggleDrawer();
            newCanvas();
        }

        /* function selectColor(el) {
             for (var i = 0; i < document.getElementsByClassName("palette").length; i++) {
                 document.getElementsByClassName("palette")[i].style.borderColor = "#777";
                 document.getElementsByClassName("palette")[i].style.borderStyle = "solid";
             }
             el.style.borderColor = "#fff";
             el.style.borderStyle = "dashed";
             color = window.getComputedStyle(el).backgroundColor;
             ctx.beginPath();
             ctx.strokeStyle = color;
         }*/

        // prototype to	start drawing on touch using canvas moveTo and lineTo
        var drawTouch = function () {
            var start = function (e) {
                ctx.beginPath();
                x = e.changedTouches[0].pageX;
                y = e.changedTouches[0].pageY - 44;
                ctx.moveTo(x, y);
            };
            var move = function (e) {
                e.preventDefault();
                x = e.changedTouches[0].pageX;
                y = e.changedTouches[0].pageY - 44;
                ctx.lineTo(x, y);
                ctx.stroke();
            };
            document.getElementById("canvas").addEventListener("touchstart", start, false);
            document.getElementById("canvas").addEventListener("touchmove", move, false);
        };

        // prototype to	start drawing on pointer(microsoft ie) using canvas moveTo and lineTo
        var drawPointer = function () {
            var start = function (e) {
                e = e.originalEvent;
                ctx.beginPath();
                x = e.pageX;
                y = e.pageY - 44;
                ctx.moveTo(x, y);
            };
            var move = function (e) {
                e.preventDefault();
                e = e.originalEvent;
                x = e.pageX;
                y = e.pageY - 44;
                ctx.lineTo(x, y);
                ctx.stroke();
            };
            document.getElementById("canvas").addEventListener("MSPointerDown", start, false);
            document.getElementById("canvas").addEventListener("MSPointerMove", move, false);
        };
        // prototype to	start drawing on mouse using canvas moveTo and lineTo
        var drawMouse = function () {
            var clicked = 0;
            var start = function (e) {
                clicked = 1;
                ctx.beginPath();
                x = e.pageX;
                y = e.pageY - 44;
                ctx.moveTo(x, y);
            };
            var move = function (e) {
                if (clicked) {
                    x = e.pageX;
                    y = e.pageY - 44;
                    ctx.lineTo(x, y);
                    ctx.stroke();
                }
            };
            var stop = function (e) {
                clicked = 0;
            };
            document.getElementById("canvas").addEventListener("mousedown", start, false);
            document.getElementById("canvas").addEventListener("mousemove", move, false);
            document.addEventListener("mouseup", stop, false);
        };
    </script>
</body>

</html>